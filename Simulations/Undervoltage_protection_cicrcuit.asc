Version 4
SHEET 1 1656 1140
WIRE 0 0 -64 0
WIRE 96 0 0 0
WIRE 208 0 96 0
WIRE 432 0 304 0
WIRE 800 16 720 16
WIRE 848 16 800 16
WIRE 992 16 848 16
WIRE 1072 16 992 16
WIRE 1248 16 1168 16
WIRE 96 80 96 0
WIRE 256 80 256 64
WIRE 720 96 720 16
WIRE 848 96 848 16
WIRE 1120 96 1120 80
WIRE -64 128 -64 0
WIRE 432 144 432 0
WIRE 992 160 992 16
WIRE 1248 160 1248 16
WIRE 960 176 912 176
WIRE 720 192 720 176
WIRE 912 192 912 176
WIRE 912 192 720 192
WIRE 1120 192 1120 176
WIRE 1120 192 1024 192
WIRE 96 208 96 160
WIRE 192 208 96 208
WIRE 848 208 848 176
WIRE 960 208 848 208
WIRE 96 224 96 208
WIRE 720 240 720 192
WIRE 848 240 848 208
WIRE -64 336 -64 208
WIRE 96 336 96 304
WIRE 96 336 -64 336
WIRE 256 336 256 256
WIRE 256 336 96 336
WIRE 432 336 432 224
WIRE 432 336 256 336
WIRE 720 352 720 320
WIRE 848 352 848 304
WIRE 848 352 720 352
WIRE 992 352 992 224
WIRE 992 352 848 352
WIRE 1248 352 1248 240
WIRE 1248 352 992 352
WIRE -144 560 -352 560
WIRE 0 560 -144 560
WIRE 128 560 0 560
WIRE 208 560 128 560
WIRE 432 560 304 560
WIRE -352 592 -352 560
WIRE 128 656 128 640
WIRE 256 656 256 624
WIRE 256 656 128 656
WIRE 128 672 128 656
WIRE -144 688 -144 560
WIRE 432 704 432 560
WIRE 128 768 128 752
WIRE -144 816 -144 752
WIRE -112 816 -144 816
WIRE 16 816 -32 816
WIRE 64 816 16 816
WIRE 16 848 16 816
WIRE -352 960 -352 672
WIRE 16 960 16 928
WIRE 16 960 -352 960
WIRE 48 960 16 960
WIRE 128 960 128 864
WIRE 128 960 48 960
WIRE 432 960 432 784
WIRE 432 960 128 960
WIRE 48 1008 48 960
FLAG 96 336 0
FLAG 0 0 VBat
FLAG 848 352 0
FLAG 800 16 VBat
FLAG 0 560 VBat2
FLAG 48 1008 0
SYMBOL npn 192 160 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL pnp 304 64 M270
SYMATTR InstName Q2
SYMATTR Value 2SAR513P
SYMBOL res 80 208 R0
SYMATTR InstName R1
SYMATTR Value 1.3k
SYMBOL res 80 64 R0
SYMATTR InstName R2
SYMATTR Value 5.6k
SYMBOL res 240 64 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 416 128 R0
SYMATTR InstName R4
SYMATTR Value 2
SYMBOL voltage -64 112 R0
WINDOW 3 -472 63 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(2.5 4.2 20m 70m 0 100m 0 5)
SYMATTR InstName V1
SYMBOL OpAmps\\AD711 992 128 R0
SYMATTR InstName U1
SYMBOL res 704 224 R0
SYMATTR InstName R5
SYMATTR Value 150k
SYMBOL res 704 80 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL diode 832 240 R0
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL res 832 80 R0
SYMATTR InstName R7
SYMATTR Value 56k
SYMBOL pnp 1168 80 M270
SYMATTR InstName Q3
SYMATTR Value 2SAR513P
SYMBOL res 1104 80 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1232 144 R0
SYMATTR InstName R9
SYMATTR Value 10
SYMBOL pnp 304 624 M270
SYMATTR InstName Q5
SYMATTR Value 2SAR544P
SYMBOL res 112 656 R0
SYMATTR InstName R12
SYMATTR Value 330
SYMBOL res 416 688 R0
SYMATTR InstName R13
SYMATTR Value 1
SYMBOL diode -160 688 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL res -16 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 2k
SYMBOL npn 64 768 R0
SYMATTR InstName Q6
SYMATTR Value 2N2222
SYMBOL voltage -352 576 R0
WINDOW 3 -472 63 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(2.5 4.2 20m 70m 0 100m 0 5)
SYMATTR InstName V2
SYMBOL res 32 944 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 820
SYMBOL res 112 544 R0
SYMATTR InstName R14
SYMATTR Value 1k
TEXT -96 360 Left 2 !.tran 100m
TEXT 520 568 Left 2 ;Transistor/diode pair based undervoltage protection circuit\nStarts to turn on at 2.8V, fully turned on at 3.0 volts.\nD5 chokes the current until a certain voltage threshold is reached (2.8V) this has the\neffect of preventing battery discharge if its voltage goes below that threshold : the whole\ncircuit is blocked at this point.\nR10 and R11 serves both as current limiters for Q6 base and Ground reference point, as \nwell as a voltage divider which is used to fine tune the starting point of the conduction region.\nR12 serves as a current limiting resistor which protects Q5 base.\nR14 is used as a pull-up in order to provide Q5 a steady reference point to VBat (hence preventing\ntransconduction of the transistor).
